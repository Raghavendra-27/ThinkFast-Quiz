<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Think Fast Quiz - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <!-- Navigation -->
    <nav class="p-6">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <img src="logo.png.jpg" alt="Quiz Logo" class="w-12 h-12 rounded-full object-cover">
                <h1 class="text-2xl font-bold text-white">Think Fast Quiz</h1>
            </div>
            <div id="authSection" class="flex items-center space-x-4">
                <a href="login-simple.html" class="text-white/80 hover:text-white transition-colors">Log In</a>
                <a href="signin.html" class="bg-white text-purple-600 px-6 py-2 rounded-lg font-semibold hover:bg-white/90 transition-all">Sign Up</a>
            </div>
            <div id="userSection" class="hidden flex items-center space-x-4">
                <span id="userName" class="text-white/80"></span>
                <button id="logoutBtn" class="text-white/80 hover:text-white transition-colors">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex items-center justify-center min-h-[calc(100vh-120px)] px-4">
        <div class="text-center max-w-4xl mx-auto">
            <!-- Hero Section -->
            <div class="mb-12">
                <h1 class="text-6xl md:text-7xl font-bold text-white mb-6 leading-tight">
                    Welcome to
                    <span class="bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">
                        Think Fast Quiz
                    </span>
                </h1>
                <p class="text-xl md:text-2xl text-white/80 mb-8 max-w-3xl mx-auto">
                    "Learning never exhausts the mind." - Leonardo da Vinci
                </p>
            </div>

            <!-- Features -->
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="glass-effect rounded-2xl p-6 text-center">
                    <div class="w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class='bx bx-brain text-3xl text-blue-300'></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-2">Multiple Categories</h3>
                    <p class="text-white/70">Test your knowledge across various subjects and topics</p>
                </div>
                
                <div class="glass-effect rounded-2xl p-6 text-center">
                    <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class='bx bx-timer text-3xl text-green-300'></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-2">Time Challenge</h3>
                    <p class="text-white/70">Answer questions quickly to maximize your score</p>
                </div>
                
                <div class="glass-effect rounded-2xl p-6 text-center">
                    <div class="w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class='bx bx-trophy text-3xl text-purple-300'></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-2">Track Progress</h3>
                    <p class="text-white/70">Monitor your performance and improve over time</p>
                </div>
            </div>

            <!-- CTA Button -->
            <div class="space-y-4">
                <a href="index.html" id="startQuizBtn" 
                   class="inline-block bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-12 py-4 rounded-2xl text-xl font-bold hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 transform hover:scale-105 shadow-2xl">
                    Start Quiz Now
                </a>
                <p class="text-white/60 text-sm">Choose from multiple categories • 15 questions each • Random selection</p>
            </div>
        </div>
    </main>

    <!-- Floating Elements -->
    <div class="fixed top-20 left-10 floating">
        <div class="w-4 h-4 bg-yellow-400 rounded-full opacity-60"></div>
    </div>
    <div class="fixed top-40 right-20 floating" style="animation-delay: 1s;">
        <div class="w-6 h-6 bg-blue-400 rounded-full opacity-40"></div>
    </div>
    <div class="fixed bottom-20 left-20 floating" style="animation-delay: 2s;">
        <div class="w-3 h-3 bg-purple-400 rounded-full opacity-50"></div>
    </div>

    <script>
        const authSection = document.getElementById('authSection');
        const userSection = document.getElementById('userSection');
        const userName = document.getElementById('userName');
        const logoutBtn = document.getElementById('logoutBtn');
        const startQuizBtn = document.getElementById('startQuizBtn');

        // Check authentication state
        checkAuthStatus();

        async function checkAuthStatus() {
            try {
                const response = await fetch('api/auth.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'action=check_auth'
                });
                
                const result = await response.json();
                
                if (result.success && result.authenticated) {
                    // User is signed in
                    authSection.classList.add('hidden');
                    userSection.classList.remove('hidden');
                    userName.textContent = `Welcome, ${result.user.name}!`;
                } else {
                    // User is signed out
                    authSection.classList.remove('hidden');
                    userSection.classList.add('hidden');
                }
            } catch (error) {
                console.error('Auth check error:', error);
                // Show auth section on error
                authSection.classList.remove('hidden');
                userSection.classList.add('hidden');
            }
        }

        // Logout functionality
        logoutBtn.addEventListener('click', async () => {
            try {
                const response = await fetch('api/auth.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'action=logout'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    window.location.reload();
                } else {
                    console.error('Logout error:', result.message);
                }
            } catch (error) {
                console.error('Logout error:', error);
            }
        });

        // Redirect to login if not authenticated
        startQuizBtn.addEventListener('click', async (e) => {
            try {
                const response = await fetch('api/auth.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'action=check_auth'
                });
                
                const result = await response.json();
                
                if (!result.success || !result.authenticated) {
                    e.preventDefault();
                    window.location.href = 'login.html';
                }
            } catch (error) {
                console.error('Auth check error:', error);
                e.preventDefault();
                window.location.href = 'login.html';
            }
        });
    </script>
</body>
</html>
